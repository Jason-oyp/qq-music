!function(s){var i,o,n,t,a=window.player,c=a.audioCtrl,u=a.indexCtrl,r=0;function d(){clearInterval(n),n=setInterval(function(){r+=2,s(".img-container").css({transform:"rotateZ("+r+"deg)",transition:"transform 0.2s"})},200)}t="../mock/data.json",s.ajax({type:"get",url:t,success:function(t){o=(i=t).length,a.render(t[0]),a.process.setAllTime(t[0].duration),c.getAudio(t[0].audio),s("body").on("indexChange",function(t,n){var e=u.getIndex(n,o);c.getAudio(i[e].audio),a.render(i[e]),a.process.setAllTime(i[e].duration),s(".img-container").css({transform:"rotateZ(0deg)",transition:"none"}),r=0,a.process.start(0),c.status?(c.play(),d()):setTimeout(function(){a.process.stop()},16.7)}),s(".prev").on("click",function(){s("body").trigger("indexChange",-1)}),s(".next").on("click",function(){s("body").trigger("indexChange",1)}),s(".play").on("click",function(){c.status?(c.pause(),a.process.stop(),clearInterval(n)):(c.play(),a.process.start(),d()),s(this).toggleClass("playing")}),function(){var t=s(".process-wrap").offset(),o=t.left,r=t.width;s(".dot").on("touchstart",function(t){a.process.stop()}).on("touchmove",function(t){var n=(t.touches[0].clientX-o)/r;if(n<=1&&0<=n){var e=n*i[u.index].duration;a.process.update(e,n)}}).on("touchend",function(t){var n=(t.changedTouches[0].clientX-o)/r;if(n<=1&&0<=n){var e=n*i[u.index].duration;a.process.setPrevTime(e),a.process.start(),c.setCurrentTime(e),setTimeout(function(){c.play()}),s(".play").addClass("playing")}}),s(".process-wrap").on("click",function(t){var n=(t.clientX-o)/r;if(n<=1&&0<=n){var e=n*i[u.index].duration;a.process.setPrevTime(e),a.process.start(),c.setCurrentTime(e),setTimeout(function(){c.play()}),s(".play").addClass("playing")}})}(),c.audio.onended=function(){s("body").trigger("indexChange",1)}},error:function(t){}})}(window.Zepto);