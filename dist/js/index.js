!function(r){var i,e,n,t,a=window.player,c=a.audioCtrl,u=a.indexCtrl,s=0;function l(){clearInterval(n),n=setInterval(function(){s+=2,r(".img-container").css({transform:"rotateZ("+s+"deg)",transition:"transform 0.2s"})},200)}t="../mock/data.json",r.ajax({type:"get",url:t,success:function(t){e=(i=t).length,a.render(t[0]),a.process.setAllTime(t[0].duration),c.getAudio(t[0].audio),r("body").on("indexChange",function(t,n){var o=u.getIndex(n,e);c.getAudio(i[o].audio),a.render(i[o]),a.process.setAllTime(i[o].duration),r(".img-container").css({transform:"rotateZ(0deg)",transition:"none"}),s=0,a.process.start(0),c.status?(c.play(),l()):setTimeout(function(){a.process.stop()},16.7)}),r(".prev").on("click",function(){r("body").trigger("indexChange",-1)}),r(".next").on("click",function(){r("body").trigger("indexChange",1)}),r(".play").on("click",function(){c.status?(c.pause(),a.process.stop(),clearInterval(n)):(c.play(),a.process.start(),l()),r(this).toggleClass("playing")}),function(){var t=r(".process-wrap").offset(),e=t.left,s=t.width;console.log(e,s),r(".dot").on("touchstart",function(t){a.process.stop()}).on("touchmove",function(t){var n=(t.touches[0].clientX-e)/s;if(n<=1&&0<=n){var o=n*i[u.index].duration;a.process.update(o,n)}}).on("touchend",function(t){var n=(t.changedTouches[0].clientX-e)/s;if(n<=1&&0<=n){var o=n*i[u.index].duration;a.process.setPrevTime(o),a.process.start(),c.setCurrentTime(o),setTimeout(function(){c.play()}),r(".play").addClass("playing"),console.log(c.audio.currentTime,o)}})}()},error:function(t){console.log(t)}})}(window.Zepto);