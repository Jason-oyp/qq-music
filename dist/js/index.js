!function(r){var i,n,o,e,a=window.player,c=a.audioCtrl,u=a.indexCtrl,s=0;function l(){clearInterval(o),o=setInterval(function(){s+=2,r(".img-container").css({transform:"rotateZ("+s+"deg)",transition:"transform 0.2s"})},200)}e="../mock/data.json",r.ajax({type:"get",url:e,success:function(e){n=(i=e).length,a.render(e[0]),a.process.setAllTime(e[0].duration),c.getAudio(e[0].audio),r("body").on("indexChange",function(e,o){var t=u.getIndex(o,n);c.getAudio(i[t].audio),a.render(i[t]),a.process.setAllTime(i[t].duration),r(".img-container").css({transform:"rotateZ(0deg)",transition:"none"}),s=0,a.process.start(0),c.status?(c.play(),l()):setTimeout(function(){a.process.stop()},16.7)}),r(".prev").on("click",function(){r("body").trigger("indexChange",-1)}),r(".next").on("click",function(){r("body").trigger("indexChange",1)}),r(".play").on("click",function(){c.status?(c.pause(),a.process.stop(),clearInterval(o)):(c.play(),a.process.start(),l()),r(this).toggleClass("playing")}),function(){var e=r(".process-wrap").offset(),n=e.left,s=e.width;console.log(n,s),r(".dot").on("touchstart",function(e){a.process.stop()}).on("touchmove",function(e){var o=(e.touches[0].clientX-n)/s;if(o<=1&&0<=o){var t=o*i[u.index].duration;a.process.update(t,o)}}).on("touchend",function(e){var o=(e.changedTouches[0].clientX-n)/s;if(o<=1&&0<=o){var t=o*i[u.index].duration;a.process.setPrevTime(t),a.process.start(),c.setCurrentTime(t),setTimeout(function(){c.play()}),r(".play").addClass("playing"),console.log(c.audio.currentTime,t)}}),r(".process-wrap").on("click",function(e){console.log(e);var o=(e.clientX-n)/s;if(o<=1&&0<=o){var t=o*i[u.index].duration;a.process.setPrevTime(t),a.process.start(),c.setCurrentTime(t),setTimeout(function(){c.play()}),r(".play").addClass("playing"),console.log(c.audio.currentTime,t)}})}()},error:function(e){console.log(e)}})}(window.Zepto);